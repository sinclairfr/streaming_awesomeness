# On configure l'encodage
USE_GPU=True
LOG_LEVEL=INFO # DEBUG, VERBOSE, INFO, WARNING, ERROR, FATAL, PANIC, QUIET
FFMPEG_LOG_LEVEL=error # debug, verbose, info, warning, error, fatal, panic, quiet
SERVER_URL=192.168.10.120

# On configure le serveur
SERVER_PORT=80

# On configure le stream
STREAM_SEGMENT_TIMEOUT=45
STREAM_ERROR_THRESHOLD=5
STREAM_RESTART_DELAY=5
STREAM_INITIAL_DELAY=10
STREAM_START_TIMEOUT=5

# On configure HLS
HLS_SEGMENT_DURATION=2
HLS_LIST_SIZE=10
HLS_FLAGS=append_list+independent_segments
HLS_DIR_PERMISSIONS=777
HLS_CLEANUP_TIMEOUT=5
HLS_SEGMENT_RETENTION=10

# On configure les ressources système
CPU_THRESHOLD=95
MEMORY_THRESHOLD=90

# On configure la vidéo
VIDEO_BITRATE=5M
VIDEO_MAXRATE=10M
VIDEO_BUFSIZE=10M
AUDIO_BITRATE=192k
AUDIO_CODEC=aac
# On configure le monitoring ffmpeg
INITIAL_STREAM_DELAY=10
MONITORING_INTERVAL=5
PLAYLIST_CHECK_INTERVAL=30
HLS_CLEANUP_RETRIES=3
CPU_CHECK_INTERVAL=1

# On configure le monitoring CPU/ressources
RESOURCES_CHECK_INTERVAL=60
SKIP_NORMALIZATION=1

NGINX_ACCESS_LOG=/var/log/nginx/access.log
TIMEOUT_NO_VIEWERS=120

FFMPEG_LOGS_DIR=/app/logs/ffmpeg
NGINX_LOGS_DIR=/var/log/nginx
CONTENT_DIR=/mnt/videos/streaming_awesomeness/content

NORMALIZATION_PARAMS={"codec_name":"h264","pix_fmt":"yuv420p","r_frame_rate":"25/1","profile":"baseline","level":"3.0"}

# Constantes
VIDEO_EXTENSIONS = (".mp4", ".avi", ".mkv", ".mov")
CPU_THRESHOLD = 85
SEGMENT_AGE_THRESHOLD = 30  # En secondes